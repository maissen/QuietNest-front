<div class="content blurry-bg" *ngIf="service.isPlaying() && !hideBanner">

  <div class="info">

    <div class="img_thumb">
      <img *ngIf="!playlistsService.isPlaying" [src]="service.getSelectedSpeechData().img">
      <img *ngIf="playlistsService.isPlaying" [src]="playlistsService.getPlayingPlaylist().img">
    </div>

    <div class="description">
      <p class="title">{{service.getSelectedSpeechData().name}}</p>
      <p 
        *ngIf="!playlistsService.isPlaying"
        class="sub_title"
      >
        <span>{{ narratorsService.getNarratorById(service.getSelectedSpeechData().narratorID).name }}</span>
      </p>
      <p 
        *ngIf="playlistsService.isPlaying"
        class="sub_title"
      >
        <span>{{ (playlistsService.getPlayingPlaylist().speeches.indexOf(service.getSelectedSpeechData().id) + 1) + '/' + playlistsService.getPlayingPlaylist().speeches.length }}</span> . <span>{{ narratorsService.getNarratorById(service.getSelectedSpeechData().narratorID).name }}</span>
      </p>
    </div>

    <div class="speech_reading_level small">
      <p class="time">{{service.getSpeechReadingLevel()}}</p>
      <input 
        class="range-slider" 
        type="range" 
        id="speech-volume-range" 
        min="0"
        max="1"
        step="0.1"
        [value]="service.getSelectedSpeechData().volume"
        (input)="updateVolume($event)"
      >
    </div>

  </div>
  
  <div class="speech_reading_level wide">

    <p class="time">{{service.getSpeechReadingLevel()}}</p>
    <input 
      class="range-slider" 
      type="range" 
      id="speech-volume-range" 
      min="0"
      max="1"
      step="0.1"
      [value]="service.getSelectedSpeechData().volume"
      (input)="updateVolume($event)"
    >

  </div>

  <div class="actions">

    <!--! like btn -->
    <button 
      *ngIf="!this.playlistsService.isPlaying"
      class="like" 
      [ngClass]="{'liked': service.getSelectedSpeechData().liked}" 
      (click)="likeSpeech()"
    >
      <i class="fa-solid fa-heart"></i>
    </button>
    <button 
      *ngIf="this.playlistsService.isPlaying"
      class="like" 
      [ngClass]="{'liked': playlistsService.getPlayingPlaylist().liked}" 
      (click)="likePlaylist()"
    >
      <i class="fa-solid fa-heart"></i>
    </button>

    <!--! expand speech btn -->
    <button *ngIf="!playlistsService.isPlaying" [routerLink]="'/app/speech/' + service.getSelectedSpeechData().id">
      <i class="fa-solid fa-expand"></i>
    </button>

    <!--! expand playlist btn -->
    <button *ngIf="playlistsService.getPlayingPlaylist() && playlistsService.isPlaying" [routerLink]="'/app/playlist/' + playlistsService.getPlayingPlaylist()?.id">
      <i class="fa-solid fa-expand"></i>
    </button>
    
    <!--! stop btn -->
    <button class="stop" (click)="globalService.clearPlayback()">
      <i class="fa-solid fa-stop"></i>
    </button>
    
    <!--! Play/Pause btn -->
    <ng-container *ngIf="!service.selected_speech_is_loading">
      <button *ngIf="globalService.showPlay_hideReplay()" (click)="service.togglePlayPause()">
        <i class="fa-solid fa-play" *ngIf="!service.isSpeechPlaying"></i>
        <i class="fa-solid fa-pause" *ngIf="service.isSpeechPlaying"></i>
      </button>
    </ng-container>
    <ng-container *ngIf="service.selected_speech_is_loading">
      <button class="loading">
        <i class="fa-solid fa-hourglass-start"></i>
      </button>
    </ng-container>
    
    <!--! replay btn -->
    <ng-container *ngIf="!service.selected_speech_is_loading">
      <button *ngIf="!globalService.showPlay_hideReplay()" (click)="globalService.replay()">
        <i class="fa-solid fa-repeat"></i>
      </button>
    </ng-container>
    
  </div>

</div>