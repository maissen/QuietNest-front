<div class="content" [ngStyle]="{'background-color': currentScene?.avgColor + '80'}">
  <app-bg-video></app-bg-video>

  <div class="categories_header">
    <div class="controls">
      <h3>Categories</h3>
    </div>

    <ul class="categories_list hide-scrollbar" #categoriesList>
      <button 
        class="blurry-bg"
        [ngClass]="{'active': activeCategories.length === 0}"
        (click)="resetCategoryFilter()"
      >
        All
      </button>
      <button
        *ngFor="let category of logicService.getAllCategories()"
        class="blurry-bg"
        [ngClass]="{'active': category.isActive}"
        (click)="toggleCategory(category)"
      >
        {{ category.name }}
      </button>
    </ul>
  </div>

  <div class="loaded_content">

    <!--! to display only active sounds in a custom category -->
    <div class="category_unit" *ngIf="logicService.getActiveSounds().length > 0">
      <div>
        <div class="title">Crrently Enjoying</div>
        <div class="audio_items">
          <div 
            class="item" 
            *ngFor="let sound of logicService.getActiveSounds()"
            [ngClass]="{'active': sound.isActive}"
            (click)="logicService.toggleSound(sound)"
          >
            <p class="name">{{ sound.name }}</p>
            <div class="icon_thumb blurry-bg" [ngStyle]="{ 'border-color': sound.isActive ? '#FFF' : 'transparent' }"></div>
          </div>
        </div>
      </div>
    </div>

    <!--! to display fetched categories and sounds -->
    <div class="category_unit" *ngFor="let category of logicService.getActiveCategories()">
      <div>
        <div class="title">{{ category.name }}</div>
        <div class="audio_items" *ngIf="category.items && category.items.length > 0">
          <div 
            class="item" 
            *ngFor="let sound of category.items"
            [ngClass]="{'active': sound.isActive}"
            (click)="logicService.toggleSound(sound)"
          >
            <p class="name">{{ sound.name }}</p>
            <div class="icon_thumb blurry-bg" [ngStyle]="{ 'border-color': sound.isActive ? '#FFF' : 'transparent' }"></div>
          </div>
        </div>
        <div *ngIf="!category.items || category.items.length === 0">
          <p>No sounds available in this category.</p>
        </div>
      </div>
    </div>
  </div>
</div>
